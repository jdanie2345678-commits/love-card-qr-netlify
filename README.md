```markdown
# Love Card QR — Firebase + Netlify (MVP)

This project is a simple Next.js app that lets you create personalized "love cards" and share them via a QR code. Cards include:
- Recipient name and chosen animal (cat, dog, bunny, panda, fox)
- A short greeting (optionally generated by OpenAI via a Netlify Function)
- Uploaded photos (stored in Firebase Storage)
- A recipient-facing card page with photos, greeting, animal emoji, and a tiny mini-game
- A serverless QR generator (Netlify Function) that returns a PNG QR for any card URL

This README explains what to provide in place of this README file (the content to upload), how to set up Firebase, how to run locally, and how to deploy on Netlify.

Quick contents
- Setup (Firebase + OpenAI)
- Local dev
- Netlify deployment (recommended)
- Environment variables
- How to create & share a QR
- Security notes & next steps

---

## 1) What to upload in the README place
Replace this file with this README.md (i.e., upload this file). It contains:
- A short project description (above)
- Setup instructions for Firebase and OpenAI
- Local run instructions
- Netlify deployment instructions
- Environment variable list
- Usage and troubleshooting tips

You can also add any project-specific info you'd like (branding, contributor names, license).

---

## 2) Firebase setup (required)
1. Go to https://console.firebase.google.com/ and create a project.
2. In "Build" → Firestore Database: create a Firestore database (start in test mode for development).
3. In "Build" → Storage: create a default Storage bucket.
4. In Project settings → General → "Your apps" → Add a Web app. Copy the SDK config values:
   - apiKey
   - authDomain
   - projectId
   - storageBucket
   - messagingSenderId
   - appId

You will paste those into environment variables (see section below).

Notes:
- For quick testing, you can keep Firestore/Storage in test mode. For production, configure rules to prevent abuse.

---

## 3) OpenAI setup (optional but recommended for AI greetings)
1. Create an OpenAI account and generate an API key: https://platform.openai.com/.
2. In Netlify, set the secret as `OPENAI_KEY` (do NOT expose it with NEXT_PUBLIC_).

---

## 4) Environment variables
Create a `.env.local` for local testing (do NOT commit it). For Netlify, set these in Site settings → Build & deploy → Environment variables.

Firebase (required — all client-visible NEXT_PUBLIC_ keys):
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id

OpenAI (server-side; keep secret):
OPENAI_KEY=sk-...

Local testing only (NOT for production):
NEXT_PUBLIC_OPENAI_KEY=sk-...   # only if you want to test OpenAI locally (exposes key in browser)

---

## 5) Run locally (development)
1. Install dependencies
   npm install

2. Add `.env.local` with the Firebase values (and NEXT_PUBLIC_OPENAI_KEY for local OpenAI testing only).

3. Start dev server
   npm run dev
   Open http://localhost:3000

Notes:
- Client-side OpenAI only works if you set NEXT_PUBLIC_OPENAI_KEY (not secure). The recommended setup for production is to use the Netlify Function with OPENAI_KEY.

---

## 6) Deploy to Netlify (recommended)
1. Push project to GitHub.
2. In Netlify: New site → Import from Git → pick your repo.
3. Build command: `npm run build`
4. Publish directory: `.next`
5. Environment variables: add the Firebase NEXT_PUBLIC_* vars and OPENAI_KEY (secret).
6. Netlify Functions: the project includes:
   - `netlify/functions/generate-greeting.js` — calls OpenAI using OPENAI_KEY
   - `netlify/functions/generate-qr.js` — returns a PNG QR

After deploy:
- Visit `/create` on your deployed site.
- Create a card → you will see the card URL and a QR image served by the generate-qr function.
- Save the QR PNG and share on social media or copy the card link.

---

## 7) How to create & share a QR (user flow)
1. Go to /create
2. Enter recipient name, choose animal, optionally click Generate to auto-create a message
   (the Generate button calls the Netlify function which uses OPENAI_KEY server-side)
3. Upload photos (optional) and click Create
4. After saving you will see:
   - Card URL `https://your-site.netlify.app/card/<id>`
   - QR image (source `/.netlify/functions/generate-qr?text=<cardURL>`)
5. Save the QR image and post or send it on social media. Scanning it opens the card page.

---

## 8) Security & production notes
- Do NOT expose OPENAI_KEY as a NEXT_PUBLIC_ env var in production. Use the serverless function.
- Configure Firebase Storage & Firestore rules before opening to a wide audience.
- Consider adding limits and client-side image compression to reduce abuse and costs.
- For private cards, add password protection or an expiration flag in Firestore.

---

## 9) Troubleshooting
- If generate-greeting fails:
  - Verify OPENAI_KEY is set in Netlify (not NEXT_PUBLIC_).
  - Check Netlify Functions logs in the Netlify dashboard.
- If Firebase uploads fail:
  - Ensure NEXT_PUBLIC_FIREBASE_* values are correct and Storage rules allow writes for your testing mode.
- If QR image fails:
  - Confirm `generate-qr` function is deployed and accessible: `https://<site>/.netlify/functions/generate-qr?text=<url>`

---

## 10) Next improvements (suggestions)
- Add password-protected or one-time-view cards
- Add client-side image compression
- Add more mini-games (memory match, puzzle using uploaded photos)
- Add analytics (views per card) and view-limits
- Make the OpenAI call server-only for all features

---

If you'd like, I can:
- Provide a ready-to-upload README.md file (this file) packaged in the ZIP — copy/paste it into your project now, or
- Walk you step-by-step to fill the Firebase values into Netlify environment settings.

```
